<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coco Colours - Admin Dashboard</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --black: #000000;
            --turquoise: #7dd3c0;
            --turquoise-light: #a5f3e7;
            --turquoise-dark: #5eead4;
            --gray-dark: #1f1f1f;
            --gray-medium: #4a4a4a;
            --gray-light: #9a9a9a;
            --gray-lighter: #e0e0e0;
            --white: #ffffff;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--black);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Layout */
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--gray-dark);
            padding: 20px;
            border-right: 1px solid var(--gray-medium);
            position: fixed;
            height: 100vh;
            width: 250px;
            overflow-y: auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 40px;
            padding: 15px;
            background: var(--black);
            border-radius: 12px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--turquoise);
            color: var(--black);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 700;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            margin-bottom: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--gray-light);
        }
        
        .menu-item:hover {
            background: var(--gray-medium);
            color: var(--white);
        }
        
        .menu-item.active {
            background: var(--turquoise);
            color: var(--black);
        }
        
        .menu-icon {
            font-size: 20px;
        }
        
        /* Main Content */
        .main {
            margin-left: 250px;
            padding: 30px;
            min-height: 100vh;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .page-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--turquoise);
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--turquoise);
            color: var(--black);
        }
        
        .btn-secondary {
            background: var(--gray-dark);
            color: var(--white);
            border: 1px solid var(--gray-medium);
        }
        
        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }
        
        .btn-success {
            background: var(--success);
            color: var(--white);
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--gray-dark);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--gray-medium);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--gray-light);
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--turquoise);
        }
        
        .stat-change {
            font-size: 12px;
            color: var(--success);
            margin-top: 5px;
        }
        
        /* Table */
        .data-table {
            background: var(--gray-dark);
            border-radius: 16px;
            overflow: hidden;
        }
        
        .table-header {
            background: var(--black);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: var(--gray-dark);
            padding: 15px;
            text-align: left;
            font-size: 12px;
            text-transform: uppercase;
            color: var(--gray-light);
            border-bottom: 1px solid var(--gray-medium);
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid var(--gray-medium);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        tr:hover {
            background: rgba(125, 211, 192, 0.05);
        }
        
        /* Request Cards */
        .request-card {
            background: var(--gray-dark);
            border: 1px solid var(--gray-medium);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }
        
        .request-info h3 {
            color: var(--turquoise);
            margin-bottom: 5px;
        }
        
        .request-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: var(--warning);
            color: var(--black);
        }
        
        .status-approved {
            background: var(--success);
            color: var(--white);
        }
        
        .status-rejected {
            background: var(--danger);
            color: var(--white);
        }
        
        .request-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .detail-item {
            background: var(--black);
            padding: 12px;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 12px;
            color: var(--gray-light);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 14px;
        }
        
        .request-images {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .request-image {
            aspect-ratio: 1;
            background: var(--black);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .request-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .request-actions {
            display: flex;
            gap: 10px;
        }
        
        .request-actions .btn {
            flex: 1;
        }
        
        /* Forms */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--gray-light);
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px;
            background: var(--black);
            border: 1px solid var(--gray-medium);
            border-radius: 8px;
            color: var(--white);
            font-size: 14px;
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--turquoise);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--gray-dark);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--turquoise);
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--gray-light);
            font-size: 28px;
            cursor: pointer;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--turquoise);
            color: var(--black);
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 600;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1001;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px;
            background: var(--gray-dark);
            border-radius: 16px;
        }
        
        .empty-icon {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .empty-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--gray-light);
            margin-bottom: 10px;
        }
        
        .empty-text {
            color: var(--gray-medium);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .main {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <div class="logo-icon">🎨</div>
                <div class="logo-text">Coco Admin</div>
            </div>
            
            <div class="menu">
                <div class="menu-item active" onclick="showPage('dashboard')">
                    <span class="menu-icon">📊</span>
                    <span>Dashboard</span>
                </div>
                <div class="menu-item" onclick="showPage('requests')">
                    <span class="menu-icon">📮</span>
                    <span>Anfragen</span>
                </div>
                <div class="menu-item" onclick="showPage('slots')">
                    <span class="menu-icon">⚡</span>
                    <span>Spontane Termine</span>
                </div>
                <div class="menu-item" onclick="showPage('events')">
                    <span class="menu-icon">🎉</span>
                    <span>Events</span>
                </div>
                <div class="menu-item" onclick="showPage('notifications')">
                    <span class="menu-icon">🔔</span>
                    <span>Push-Nachrichten</span>
                </div>
                <div class="menu-item" onclick="showPage('artists')">
                    <span class="menu-icon">👥</span>
                    <span>Artists</span>
                </div>
                <div class="menu-item" onclick="showPage('analytics')">
                    <span class="menu-icon">📈</span>
                    <span>Analytics</span>
                </div>
                <div class="menu-item" onclick="showPage('settings')">
                    <span class="menu-icon">⚙️</span>
                    <span>Einstellungen</span>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboardPage">
                <div class="header">
                    <h1 class="page-title">Dashboard</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="refreshData()">🔄 Aktualisieren</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Neue Anfragen</div>
                        <div class="stat-value" id="newRequests">0</div>
                        <div class="stat-change">↑ Heute eingegangen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Aktive Slots</div>
                        <div class="stat-value" id="activeSlots">0</div>
                        <div class="stat-change">Verfügbar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Events</div>
                        <div class="stat-value" id="activeEvents">0</div>
                        <div class="stat-change">Geplant</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Conversion Rate</div>
                        <div class="stat-value">68%</div>
                        <div class="stat-change">↑ 12% diese Woche</div>
                    </div>
                </div>
                
                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Letzte Aktivitäten</h3>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Zeit</th>
                                <th>Typ</th>
                                <th>Details</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="activityLog">
                            <tr>
                                <td>Vor 5 Min</td>
                                <td>Anfrage</td>
                                <td>Max Mustermann - Watercolor</td>
                                <td><span class="request-status status-pending">Neu</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Requests Page -->
            <div class="page" id="requestsPage">
                <div class="header">
                    <h1 class="page-title">Buchungsanfragen</h1>
                    <div class="header-actions">
                        <select class="form-select" style="width: 200px;" onchange="filterRequests(this.value)">
                            <option value="all">Alle Anfragen</option>
                            <option value="pending">Ausstehend</option>
                            <option value="approved">Bestätigt</option>
                            <option value="rejected">Abgelehnt</option>
                        </select>
                    </div>
                </div>
                
                <div id="requestsList">
                    <!-- Requests werden hier dynamisch geladen -->
                </div>
                
                <div class="empty-state" id="emptyRequests" style="display: none;">
                    <div class="empty-icon">📮</div>
                    <div class="empty-title">Keine Anfragen</div>
                    <div class="empty-text">Neue Buchungsanfragen erscheinen hier</div>
                </div>
            </div>
            
            <!-- Slots Page -->
            <div class="page" id="slotsPage">
                <div class="header">
                    <h1 class="page-title">Spontane Termine</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openSlotModal()">+ Neuer Slot</button>
                    </div>
                </div>
                
                <div id="slotsList">
                    <!-- Slots werden hier dynamisch geladen -->
                </div>
                
                <div class="empty-state" id="emptySlots" style="display: none;">
                    <div class="empty-icon">⚡</div>
                    <div class="empty-title">Keine aktiven Slots</div>
                    <div class="empty-text">Erstelle spontane Termine für deine Kunden</div>
                </div>
            </div>
            
            <!-- Events Page -->
            <div class="page" id="eventsPage">
                <div class="header">
                    <h1 class="page-title">Events & Aktionen</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openEventModal()">+ Neues Event</button>
                    </div>
                </div>
                
                <div id="eventsList">
                    <!-- Events werden hier dynamisch geladen -->
                </div>
                
                <div class="empty-state" id="emptyEvents" style="display: none;">
                    <div class="empty-icon">🎉</div>
                    <div class="empty-title">Keine Events</div>
                    <div class="empty-text">Plane Events und Aktionen für deine Kunden</div>
                </div>
            </div>
            
            <!-- Notifications Page -->
            <div class="page" id="notificationsPage">
                <div class="header">
                    <h1 class="page-title">Push-Nachrichten</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openPushModal()">📢 Push senden</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Abonnenten</div>
                        <div class="stat-value">247</div>
                        <div class="stat-change">↑ 15 diese Woche</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Gesendet heute</div>
                        <div class="stat-value">3</div>
                        <div class="stat-change">Letzte vor 2 Std</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Öffnungsrate</div>
                        <div class="stat-value">72%</div>
                        <div class="stat-change">↑ Überdurchschnittlich</div>
                    </div>
                </div>
                
                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Letzte Nachrichten</h3>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Zeit</th>
                                <th>Nachricht</th>
                                <th>Gesendet an</th>
                                <th>Geöffnet</th>
                                <th>Conversions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Vor 2 Std</td>
                                <td>Nina hat 15:30 frei!</td>
                                <td>247</td>
                                <td>178 (72%)</td>
                                <td>1 Buchung</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Artists Page -->
            <div class="page" id="artistsPage">
                <div class="header">
                    <h1 class="page-title">Artists</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openArtistModal()">+ Artist hinzufügen</button>
                    </div>
                </div>
                
                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Style</th>
                                <th>Termine diese Woche</th>
                                <th>Bewertung</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Nina</td>
                                <td>Watercolor • Floral</td>
                                <td>12</td>
                                <td>⭐ 4.9</td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px;">Bearbeiten</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Max</td>
                                <td>Geometric • Minimal</td>
                                <td>8</td>
                                <td>⭐ 5.0</td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px;">Bearbeiten</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Sophie</td>
                                <td>Fineline • Ornamental</td>
                                <td>15</td>
                                <td>⭐ 4.8</td>
                                <td>
                                    <button class="btn btn-secondary" style="padding: 5px 10px;">Bearbeiten</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Analytics Page -->
            <div class="page" id="analyticsPage">
                <div class="header">
                    <h1 class="page-title">Analytics</h1>
                    <div class="header-actions">
                        <select class="form-select" style="width: 150px;">
                            <option>Diese Woche</option>
                            <option>Dieser Monat</option>
                            <option>Dieses Jahr</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Anfragen gesamt</div>
                        <div class="stat-value">142</div>
                        <div class="stat-change">↑ 23% vs. letzte Woche</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Conversion Rate</div>
                        <div class="stat-value">68%</div>
                        <div class="stat-change">↑ Sehr gut</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ø Antwortzeit</div>
                        <div class="stat-value">12min</div>
                        <div class="stat-change">↓ 3min schneller</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Umsatz</div>
                        <div class="stat-value">8.4k€</div>
                        <div class="stat-change">↑ 18% vs. letzte Woche</div>
                    </div>
                </div>
                
                <div class="data-table">
                    <div class="table-header">
                        <h3 class="table-title">Top Performers</h3>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Artist</th>
                                <th>Anfragen</th>
                                <th>Bestätigt</th>
                                <th>Conversion</th>
                                <th>Umsatz</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Sophie</td>
                                <td>48</td>
                                <td>36</td>
                                <td>75%</td>
                                <td>3.2k€</td>
                            </tr>
                            <tr>
                                <td>Nina</td>
                                <td>41</td>
                                <td>28</td>
                                <td>68%</td>
                                <td>2.8k€</td>
                            </tr>
                            <tr>
                                <td>Max</td>
                                <td>35</td>
                                <td>22</td>
                                <td>63%</td>
                                <td>2.4k€</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Settings Page -->
            <div class="page" id="settingsPage">
                <div class="header">
                    <h1 class="page-title">Einstellungen</h1>
                </div>
                
                <div class="request-card">
                    <h3 style="margin-bottom: 20px;">Studio-Informationen</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Studio Name</label>
                            <input type="text" class="form-input" value="Coco Colours Tattoo Jena">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Telefon</label>
                            <input type="tel" class="form-input" value="03641 / 123456">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" value="info@cococolours.de">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Adresse</label>
                            <input type="text" class="form-input" value="Musterstraße 123, 07743 Jena">
                        </div>
                    </div>
                    <button class="btn btn-primary">Speichern</button>
                </div>
                
                <div class="request-card" style="margin-top: 20px;">
                    <h3 style="margin-bottom: 20px;">Öffnungszeiten</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Montag - Freitag</label>
                            <input type="text" class="form-input" value="11:00 - 19:00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Samstag</label>
                            <input type="text" class="form-input" value="10:00 - 18:00">
                        </div>
                    </div>
                    <button class="btn btn-primary">Speichern</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Slot Modal -->
    <div class="modal" id="slotModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Spontanen Termin hinzufügen</h3>
                <button class="modal-close" onclick="closeModal('slotModal')">×</button>
            </div>
            
            <form id="slotForm">
                <div class="form-group">
                    <label class="form-label">Artist</label>
                    <select class="form-select" id="slotArtist" required>
                        <option value="">Artist wählen...</option>
                        <option value="Nina">Nina - Watercolor</option>
                        <option value="Max">Max - Geometric</option>
                        <option value="Sophie">Sophie - Fineline</option>
                        <option value="Tom">Tom - Traditional</option>
                    </select>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Datum</label>
                        <input type="date" class="form-input" id="slotDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Uhrzeit</label>
                        <input type="time" class="form-input" id="slotTime" required>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Dauer</label>
                        <select class="form-select" id="slotDuration" required>
                            <option value="1">1 Stunde</option>
                            <option value="2">2 Stunden</option>
                            <option value="3">3 Stunden</option>
                            <option value="4">4 Stunden</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Größe</label>
                        <select class="form-select" id="slotSize" required>
                            <option value="Klein">Klein (bis 5cm)</option>
                            <option value="Klein-Mittel">Klein-Mittel</option>
                            <option value="Mittel">Mittel (5-15cm)</option>
                            <option value="Groß">Groß (15-25cm)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Preis</label>
                    <input type="number" class="form-input" id="slotPrice" placeholder="z.B. 150" required>
                </div>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="slotUrgent">
                        Als LAST MINUTE markieren
                    </label>
                </div>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="slotSendPush" checked>
                        Push-Benachrichtigung senden
                    </label>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('slotModal')">Abbrechen</button>
                    <button type="submit" class="btn btn-primary">Slot erstellen</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Event Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Event erstellen</h3>
                <button class="modal-close" onclick="closeModal('eventModal')">×</button>
            </div>
            
            <form id="eventForm">
                <div class="form-group">
                    <label class="form-label">Event-Titel</label>
                    <input type="text" class="form-input" id="eventTitle" placeholder="z.B. Flash Day" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Datum</label>
                    <input type="date" class="form-input" id="eventDate" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Beschreibung</label>
                    <textarea class="form-textarea" id="eventDescription" placeholder="Beschreibe das Event..." required></textarea>
                </div>
                
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="eventSendPush" checked>
                        Push-Benachrichtigung an alle senden
                    </label>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('eventModal')">Abbrechen</button>
                    <button type="submit" class="btn btn-primary">Event erstellen</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Response Modal -->
    <div class="modal" id="responseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Auf Anfrage antworten</h3>
                <button class="modal-close" onclick="closeModal('responseModal')">×</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Nachricht an den Kunden</label>
                <textarea class="form-textarea" id="responseMessage" placeholder="z.B. Termin bestätigt! Bitte sei 10 Min früher da..." rows="4"></textarea>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-danger" onclick="rejectRequest()">Ablehnen</button>
                <button class="btn btn-success" onclick="approveRequest()">Bestätigen</button>
            </div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast"></div>
    
    <script>
        // State
        let currentPage = 'dashboard';
        let bookingRequests = [];
        let spontaneousSlots = [];
        let events = [];
        let currentRequest = null;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadAllData();
            
            // Form handlers
            document.getElementById('slotForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createSlot();
            });
            
            document.getElementById('eventForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createEvent();
            });
            
            // Set today's date as default
            document.getElementById('slotDate').valueAsDate = new Date();
            document.getElementById('eventDate').valueAsDate = new Date();
        });
        
        // Load All Data
        function loadAllData() {
            // Load Requests
            const savedRequests = localStorage.getItem('bookingRequests');
            if (savedRequests) {
                bookingRequests = JSON.parse(savedRequests);
            }
            
            // Load Slots
            const savedSlots = localStorage.getItem('spontaneousSlots');
            if (savedSlots) {
                spontaneousSlots = JSON.parse(savedSlots);
            }
            
            // Load Events
            const savedEvents = localStorage.getItem('events');
            if (savedEvents) {
                events = JSON.parse(savedEvents);
            }
            
            updateDashboard();
            displayRequests();
            displaySlots();
            displayEvents();
        }
        
        // Show Page
        function showPage(pageName) {
            // Update menu
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.menu-item').classList.add('active');
            
            // Update pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageName + 'Page').classList.add('active');
            
            currentPage = pageName;
            
            // Reload data for page
            if (pageName === 'requests') displayRequests();
            if (pageName === 'slots') displaySlots();
            if (pageName === 'events') displayEvents();
        }
        
        // Update Dashboard
        function updateDashboard() {
            const pendingRequests = bookingRequests.filter(r => r.status === 'pending').length;
            document.getElementById('newRequests').textContent = pendingRequests;
            document.getElementById('activeSlots').textContent = spontaneousSlots.length;
            document.getElementById('activeEvents').textContent = events.length;
        }
        
        // Display Requests
        function displayRequests(filter = 'all') {
            const container = document.getElementById('requestsList');
            const emptyState = document.getElementById('emptyRequests');
            
            let filtered = bookingRequests;
            if (filter !== 'all') {
                filtered = bookingRequests.filter(r => r.status === filter);
            }
            
            if (filtered.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            container.innerHTML = filtered.map(request => `
                <div class="request-card">
                    <div class="request-header">
                        <div class="request-info">
                            <h3>${request.name}</h3>
                            <div style="color: var(--gray-light);">
                                ${request.slot.date} • ${request.slot.time} • ${request.slot.artist}
                            </div>
                        </div>
                        <div class="request-status status-${request.status}">
                            ${request.status === 'pending' ? 'Ausstehend' : 
                              request.status === 'approved' ? 'Bestätigt' : 'Abgelehnt'}
                        </div>
                    </div>
                    
                    <div class="request-details">
                        <div class="detail-item">
                            <div class="detail-label">Telefon</div>
                            <div class="detail-value">${request.phone}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${request.email || '-'}</div>
                        </div>
                    </div>
                    
                    <div class="detail-item" style="margin-bottom: 15px;">
                        <div class="detail-label">Tattoo-Wunsch</div>
                        <div class="detail-value">${request.description}</div>
                    </div>
                    
                    ${request.message ? `
                        <div class="detail-item" style="margin-bottom: 15px;">
                            <div class="detail-label">Nachricht</div>
                            <div class="detail-value">${request.message}</div>
                        </div>
                    ` : ''}
                    
                    ${request.images && request.images.length > 0 ? `
                        <div class="request-images">
                            ${request.images.map(img => `
                                <div class="request-image">
                                    <img src="${img}" alt="Reference">
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    
                    ${request.status === 'pending' ? `
                        <div class="request-actions">
                            <button class="btn btn-danger" onclick="openResponseModal(${request.id}, 'reject')">
                                Ablehnen
                            </button>
                            <button class="btn btn-success" onclick="openResponseModal(${request.id}, 'approve')">
                                Bestätigen
                            </button>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }
        
        // Display Slots
        function displaySlots() {
            const container = document.getElementById('slotsList');
            const emptyState = document.getElementById('emptySlots');
            
            if (spontaneousSlots.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const artistStyles = {
                'Nina': 'Watercolor • Floral',
                'Max': 'Geometric • Minimal',
                'Sophie': 'Fineline • Ornamental',
                'Tom': 'Traditional • Color'
            };
            
            container.innerHTML = spontaneousSlots.map(slot => `
                <div class="request-card">
                    <div class="request-header">
                        <div>
                            <h3 style="color: var(--turquoise);">${slot.date} • ${slot.time}</h3>
                            <div>${slot.artist} • ${slot.style || artistStyles[slot.artist]}</div>
                        </div>
                        ${slot.urgent ? 
                            '<span class="request-status" style="background: var(--warning);">LAST MINUTE</span>' : 
                            ''
                        }
                    </div>
                    <div class="request-details">
                        <div class="detail-item">
                            <div class="detail-label">Dauer</div>
                            <div class="detail-value">${slot.duration}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Größe</div>
                            <div class="detail-value">${slot.size}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Preis</div>
                            <div class="detail-value">${slot.price}</div>
                        </div>
                    </div>
                    <div class="request-actions">
                        <button class="btn btn-danger" onclick="deleteSlot(${slot.id})">Löschen</button>
                        <button class="btn btn-primary" onclick="sendPushForSlot(${slot.id})">Push senden</button>
                    </div>
                </div>
            `).join('');
        }
        
        // Display Events
        function displayEvents() {
            const container = document.getElementById('eventsList');
            const emptyState = document.getElementById('emptyEvents');
            
            if (events.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            container.innerHTML = events.map(event => `
                <div class="request-card">
                    <div class="request-header">
                        <div>
                            <h3 style="color: var(--turquoise);">${event.title}</h3>
                            <div>${event.date}</div>
                        </div>
                    </div>
                    <div style="margin: 15px 0;">
                        ${event.description}
                    </div>
                    <div class="request-actions">
                        <button class="btn btn-danger" onclick="deleteEvent(${event.id})">Löschen</button>
                        <button class="btn btn-primary" onclick="sendEventPush(${event.id})">Push senden</button>
                    </div>
                </div>
            `).join('');
        }
        
        // Open Slot Modal
        function openSlotModal() {
            document.getElementById('slotModal').classList.add('active');
        }
        
        // Open Event Modal
        function openEventModal() {
            document.getElementById('eventModal').classList.add('active');
        }
        
        // Open Response Modal
        function openResponseModal(requestId, action) {
            currentRequest = bookingRequests.find(r => r.id === requestId);
            if (!currentRequest) return;
            
            currentRequest.action = action;
            document.getElementById('responseModal').classList.add('active');
        }
        
        // Close Modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Create Slot
        function createSlot() {
            const artist = document.getElementById('slotArtist').value;
            const date = document.getElementById('slotDate').value;
            const time = document.getElementById('slotTime').value;
            const duration = document.getElementById('slotDuration').value;
            const size = document.getElementById('slotSize').value;
            const price = document.getElementById('slotPrice').value;
            const urgent = document.getElementById('slotUrgent').checked;
            const sendPush = document.getElementById('slotSendPush').checked;
            
            // Format date
            const dateObj = new Date(date);
            const today = new Date();
            let dateDisplay = '';
            
            if (dateObj.toDateString() === today.toDateString()) {
                dateDisplay = 'Heute';
            } else {
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                if (dateObj.toDateString() === tomorrow.toDateString()) {
                    dateDisplay = 'Morgen';
                } else {
                    dateDisplay = dateObj.toLocaleDateString('de-DE', { weekday: 'short', day: 'numeric', month: 'numeric' });
                }
            }
            
            const artistData = {
                'Nina': { avatar: '👩‍🎨', style: 'Watercolor • Floral' },
                'Max': { avatar: '🧑‍🎨', style: 'Geometric • Minimal' },
                'Sophie': { avatar: '💫', style: 'Fineline • Ornamental' },
                'Tom': { avatar: '🎯', style: 'Traditional • Color' }
            };
            
            const newSlot = {
                id: Date.now(),
                artist: artist,
                avatar: artistData[artist].avatar,
                style: artistData[artist].style,
                date: dateDisplay,
                time: time,
                duration: duration + ' Stunde' + (duration > 1 ? 'n' : ''),
                size: size,
                price: price + '€',
                urgent: urgent
            };
            
            spontaneousSlots.push(newSlot);
            localStorage.setItem('spontaneousSlots', JSON.stringify(spontaneousSlots));
            
            if (sendPush) {
                showToast(`✅ Slot erstellt und Push gesendet!`);
            } else {
                showToast('✅ Slot erfolgreich erstellt!');
            }
            
            displaySlots();
            updateDashboard();
            closeModal('slotModal');
            document.getElementById('slotForm').reset();
        }
        
        // Create Event
        function createEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const description = document.getElementById('eventDescription').value;
            const sendPush = document.getElementById('eventSendPush').checked;
            
            const dateObj = new Date(date);
            const dateDisplay = dateObj.toLocaleDateString('de-DE', { day: 'numeric', month: 'long' });
            
            const newEvent = {
                id: Date.now(),
                title: title,
                date: dateDisplay,
                description: description
            };
            
            events.push(newEvent);
            localStorage.setItem('events', JSON.stringify(events));
            
            if (sendPush) {
                showToast('✅ Event erstellt und Push gesendet!');
            } else {
                showToast('✅ Event erfolgreich erstellt!');
            }
            
            displayEvents();
            updateDashboard();
            closeModal('eventModal');
            document.getElementById('eventForm').reset();
        }
        
        // Delete Slot
        function deleteSlot(id) {
            if (confirm('Slot wirklich löschen?')) {
                spontaneousSlots = spontaneousSlots.filter(s => s.id !== id);
                localStorage.setItem('spontaneousSlots', JSON.stringify(spontaneousSlots));
                displaySlots();
                updateDashboard();
                showToast('🗑️ Slot gelöscht');
            }
        }
        
        // Delete Event
        function deleteEvent(id) {
            if (confirm('Event wirklich löschen?')) {
                events = events.filter(e => e.id !== id);
                localStorage.setItem('events', JSON.stringify(events));
                displayEvents();
                updateDashboard();
                showToast('🗑️ Event gelöscht');
            }
        }
        
        // Send Push for Slot
        function sendPushForSlot(id) {
            const slot = spontaneousSlots.find(s => s.id === id);
            if (slot) {
                showToast('🔔 Push-Benachrichtigung gesendet!');
            }
        }
        
        // Send Event Push
        function sendEventPush(id) {
            const event = events.find(e => e.id === id);
            if (event) {
                showToast('🔔 Push-Benachrichtigung gesendet!');
            }
        }
        
        // Approve Request
        function approveRequest() {
            if (!currentRequest) return;
            
            const message = document.getElementById('responseMessage').value;
            
            // Update request status
            currentRequest.status = 'approved';
            currentRequest.adminMessage = message || 'Termin bestätigt! Wir freuen uns auf dich!';
            
            // Save to localStorage
            localStorage.setItem('bookingRequests', JSON.stringify(bookingRequests));
            
            // Also update in customer's requests
            const customerRequests = JSON.parse(localStorage.getItem('myRequests') || '[]');
            const customerRequest = customerRequests.find(r => r.id === currentRequest.id);
            if (customerRequest) {
                customerRequest.status = 'approved';
                customerRequest.adminMessage = currentRequest.adminMessage;
                localStorage.setItem('myRequests', JSON.stringify(customerRequests));
            }
            
            displayRequests();
            updateDashboard();
            closeModal('responseModal');
            showToast('✅ Anfrage bestätigt!');
        }
        
        // Reject Request
        function rejectRequest() {
            if (!currentRequest) return;
            
            const message = document.getElementById('responseMessage').value;
            
            // Update request status
            currentRequest.status = 'rejected';
            currentRequest.adminMessage = message || 'Leider können wir diesen Termin nicht anbieten.';
            
            // Save to localStorage
            localStorage.setItem('bookingRequests', JSON.stringify(bookingRequests));
            
            // Also update in customer's requests
            const customerRequests = JSON.parse(localStorage.getItem('myRequests') || '[]');
            const customerRequest = customerRequests.find(r => r.id === currentRequest.id);
            if (customerRequest) {
                customerRequest.status = 'rejected';
                customerRequest.adminMessage = currentRequest.adminMessage;
                localStorage.setItem('myRequests', JSON.stringify(customerRequests));
            }
            
            displayRequests();
            updateDashboard();
            closeModal('responseModal');
            showToast('❌ Anfrage abgelehnt');
        }
        
        // Filter Requests
        function filterRequests(filter) {
            displayRequests(filter);
        }
        
        // Refresh Data
        function refreshData() {
            loadAllData();
            showToast('🔄 Daten aktualisiert');
        }
        
        // Show Toast
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Open Push Modal
        function openPushModal() {
            showToast('📢 Push-Feature kommt bald!');
        }
        
        // Open Artist Modal
        function openArtistModal() {
            showToast('👥 Artist-Verwaltung kommt bald!');
        }
        
        // Auto refresh every 30 seconds
        setInterval(() => {
            loadAllData();
        }, 30000);
    </script>
</body>
</html>